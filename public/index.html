<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diffie</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="themes.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <div class="focus-mode-controls">
      <button id="focus-mode-toggle" title="Exit focus mode">
        <i class="fas fa-expand"></i> Exit Focus Mode
      </button>
      <button id="focus-mode-generate-report" class="secondary-btn" title="Generate report">
        <i class="fas fa-file-export"></i>
        Generate Report
      </button>
      <button id="focus-mode-share-btn" class="secondary-btn" title="Share this diff">
        <i class="fas fa-share-alt"></i>
        Share
      </button>
      <div class="focus-mode-theme-toggle">
        <i class="fas fa-sun"></i>
        <div class="toggle-switch">
          <input type="checkbox" id="focus-mode-theme-toggle-checkbox">
          <label for="focus-mode-theme-toggle-checkbox"></label>
        </div>
        <i class="fas fa-moon"></i>
      </div>
    </div>
    <header>
      <div class="logo">
        <i class="fas fa-code-compare"></i>
        <h1>Diffie</h1>
      </div>
      <div class="theme-toggle">
        <i class="fas fa-sun"></i>
        <div class="toggle-switch">
          <input type="checkbox" id="theme-toggle-checkbox">
          <label for="theme-toggle-checkbox"></label>
        </div>
        <i class="fas fa-moon"></i>
        
        <div class="theme-selector">
          <button id="theme-selector-btn" class="control-btn" title="Change theme">
            <i class="fas fa-palette"></i>
          </button>
          <div id="theme-selector-dropdown" class="theme-selector-dropdown">
            <div class="theme-dropdown-header">
              <i class="fas fa-palette"></i>
              <span>Select Theme</span>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">Default</div>
              <div class="theme-option" data-theme="default" data-dark="false">
                <div class="theme-color-preview default-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="default" data-dark="true">
                <div class="theme-color-preview default-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">Cloudflare</div>
              <div class="theme-option" data-theme="cloudflare" data-dark="false">
                <div class="theme-color-preview cloudflare-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="cloudflare" data-dark="true">
                <div class="theme-color-preview cloudflare-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">GitLab</div>
              <div class="theme-option" data-theme="gitlab" data-dark="false">
                <div class="theme-color-preview gitlab-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="gitlab" data-dark="true">
                <div class="theme-color-preview gitlab-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">GitHub</div>
              <div class="theme-option" data-theme="github" data-dark="false">
                <div class="theme-color-preview github-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="github" data-dark="true">
                <div class="theme-color-preview github-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">VS Code</div>
              <div class="theme-option" data-theme="vscode" data-dark="false">
                <div class="theme-color-preview vscode-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="vscode" data-dark="true">
                <div class="theme-color-preview vscode-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">Material</div>
              <div class="theme-option" data-theme="material" data-dark="false">
                <div class="theme-color-preview material-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="material" data-dark="true">
                <div class="theme-color-preview material-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">Obsidian</div>
              <div class="theme-option" data-theme="obsidian" data-dark="false">
                <div class="theme-color-preview obsidian-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="obsidian" data-dark="true">
                <div class="theme-color-preview obsidian-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
            
            <div class="theme-category">
              <div class="theme-category-label">Editor</div>
              <div class="theme-option" data-theme="editor" data-dark="false">
                <div class="theme-color-preview editor-light-preview"></div>
                <span>Light</span>
              </div>
              <div class="theme-option" data-theme="editor" data-dark="true">
                <div class="theme-color-preview editor-dark-preview"></div>
                <span>Dark</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main>
      <div class="app-info">
        <h2>Simple File Diff Viewer</h2>
        <p>Compare files from server or upload your own files</p>
      </div>
      
      <div class="tabs">
        <button class="tab-btn active" data-tab="server-files">Server Files</button>
        <button class="tab-btn" data-tab="local-files">Local Files</button>
        <button class="tab-btn" data-tab="multi-files">Multiple Files</button>
      </div>
      
      <div class="tab-content" id="server-files-tab">
        <div class="file-inputs">
          <div class="file-input-group">
            <label for="file1-path">File 1 Path:</label>
            <div class="input-with-icon">
              <i class="fas fa-file-code"></i>
              <input type="text" id="file1-path" placeholder="Enter path to first file">
            </div>
          </div>
          <div class="file-input-group">
            <label for="file2-path">File 2 Path:</label>
            <div class="input-with-icon">
              <i class="fas fa-file-code"></i>
              <input type="text" id="file2-path" placeholder="Enter path to second file">
            </div>
          </div>
          <button id="compare-server-btn" class="primary-btn">
            <i class="fas fa-code-compare"></i>
            Compare Files
          </button>
        </div>
      </div>
      
      <div class="tab-content hidden" id="local-files-tab">
        <div class="file-inputs">
          <div class="file-input-group">
            <label for="file1-upload">File 1 Path:</label>
            <div class="input-with-icon">
              <i class="fas fa-file-upload"></i>
              <div class="file-upload-wrapper">
                <input type="file" id="file1-upload" class="file-upload-input">
                <label for="file1-upload" class="file-upload-text">
                  <span id="file1-upload-name">Select first file</span>
                </label>
              </div>
            </div>
          </div>
          <div class="file-input-group">
            <label for="file2-upload">File 2 Path:</label>
            <div class="input-with-icon">
              <i class="fas fa-file-upload"></i>
              <div class="file-upload-wrapper">
                <input type="file" id="file2-upload" class="file-upload-input">
                <label for="file2-upload" class="file-upload-text">
                  <span id="file2-upload-name">Select second file</span>
                </label>
              </div>
            </div>
          </div>
          <button id="compare-local-btn" class="primary-btn">
            <i class="fas fa-code-compare"></i>
            Compare Files
          </button>
        </div>
      </div>
      
      <div class="tab-content hidden" id="multi-files-tab">
        <div class="multi-file-container">
          <div class="multi-file-controls">
            <button id="add-file-pair-btn" class="secondary-btn">
              <i class="fas fa-plus"></i>
              Add File Pair
            </button>
            <button id="compare-multi-btn" class="primary-btn">
              <i class="fas fa-code-compare"></i>
              Compare All Files
            </button>
            <button id="generate-report-btn" class="secondary-btn">
              <i class="fas fa-file-export"></i>
              Generate Report
            </button>
          </div>
          
          <div id="file-pairs-container">
            <div class="file-pair" data-pair-id="0">
              <div class="file-pair-header">
                <span class="file-pair-title">File Pair #1</span>
                <div class="file-pair-actions">
                  <button class="remove-pair-btn" title="Remove this pair">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
              <div class="file-inputs">
                <div class="file-input-group">
                  <label>File 1 Path:</label>
                  <div class="input-with-icon">
                    <i class="fas fa-file-code"></i>
                    <input type="text" class="file1-path-multi" placeholder="Enter path to first file">
                  </div>
                </div>
                <div class="file-input-group">
                  <label>File 2 Path:</label>
                  <div class="input-with-icon">
                    <i class="fas fa-file-code"></i>
                    <input type="text" class="file2-path-multi" placeholder="Enter path to second file">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="single-diff-container" class="diff-container">
        <div class="diff-header">
          <div class="file-info">
            <span id="file1-name">No file selected</span>
              <div class="compare-icon">
                <i class="fas fa-exchange-alt"></i>
              </div>
            <span id="file2-name">No file selected</span>
          </div>
          <div class="diff-controls">
            <button id="side-by-side-btn" class="control-btn active" title="Side by side view">
              <i class="fas fa-columns"></i>
            </button>
            <button id="unified-btn" class="control-btn" title="Unified view">
              <i class="fas fa-align-justify"></i>
            </button>
            <button id="word-wrap-btn" class="control-btn" title="Toggle word wrap">
              <i class="fas fa-text-width"></i>
            </button>
            <button id="line-numbers-btn" class="control-btn active" title="Hide line numbers">
              <i class="fas fa-list-ol"></i>
            </button>
            <button id="show-complete-btn" class="control-btn" title="Show complete files">
              <i class="fas fa-file-alt"></i>
            </button>
            <button id="share-btn" class="control-btn" title="Share this diff">
              <i class="fas fa-share-alt"></i>
            </button>
          </div>
        </div>
        
        <div class="diff-stats">
          <div class="stat-item additions">
            <i class="fas fa-plus-circle"></i>
            <span id="additions-count">0</span> additions
          </div>
          <div class="stat-item deletions">
            <i class="fas fa-minus-circle"></i>
            <span id="deletions-count">0</span> deletions
          </div>
          <div class="stat-item changes">
            <i class="fas fa-exchange-alt"></i>
            <span id="changes-count">0</span> changes
          </div>
        </div>

        <div class="diff-content-container">
          <div id="diff-content" class="side-by-side">
            <div class="loading-indicator hidden">
              <div class="spinner"></div>
              <p>Generating diff...</p>
            </div>
            <div class="empty-state">
              <i class="fas fa-code-compare"></i>
              <p>Select files above and click "Compare Files" to see the differences</p>
            </div>
            <div class="no-changes-state hidden">
              <i class="fas fa-equals"></i>
              <p>Files are identical. No differences found.</p>
            </div>
            <div class="diff-view hidden">
              <div class="filename-wrapper">
                <div class="filename-bar">
                  <div class="filename-container">
                    <span class="filename file1-filename"></span>
                    <div class="compare-icon">
                      <i class="fas fa-exchange-alt"></i>
                    </div>
                    <span class="filename file2-filename"></span>
                  </div>
                  <button class="toggle-filename-btn" title="Hide filename bar">
                    <i class="fas fa-angle-up"></i>
                  </button>
                </div>
                <button class="persistent-toggle-btn" title="Show filename bar">
                  <i class="fas fa-angle-down"></i>
                </button>
              </div>
              <div class="diff-view-content">
                <div class="file1-content"></div>
                <div class="file2-content"></div>
              </div>
            </div>
            <div class="unified-view hidden">
              <pre id="unified-diff"></pre>
            </div>
          </div>
        </div>
      </div>
      
      <div id="multi-diff-container" class="diff-container hidden">
        <div class="multi-diff-header">
          <h3>Multiple File Comparison</h3>
          <div class="multi-diff-controls">
            <button id="multi-side-by-side-btn" class="control-btn active" title="Side by side view">
              <i class="fas fa-columns"></i>
            </button>
            <button id="multi-unified-btn" class="control-btn" title="Unified view">
              <i class="fas fa-align-justify"></i>
            </button>
            <button id="multi-word-wrap-btn" class="control-btn" title="Toggle word wrap">
              <i class="fas fa-text-width"></i>
            </button>
            <button id="multi-line-numbers-btn" class="control-btn active" title="Hide line numbers">
              <i class="fas fa-list-ol"></i>
            </button>
            <button id="multi-collapse-all-btn" class="control-btn" title="Collapse all diffs">
              <i class="fas fa-compress-alt"></i>
            </button>
            <button id="multi-expand-all-btn" class="control-btn" title="Expand all diffs">
              <i class="fas fa-expand-alt"></i>
            </button>
            <button id="multi-focus-mode-btn" class="control-btn" title="Enter focus mode">
              <i class="fas fa-compress"></i>
            </button>
          </div>
        </div>
        
        <div class="multi-diff-summary">
          <div class="summary-header">
            <h4>Summary</h4>
          </div>
          <div class="summary-content">
            <div class="summary-stats">
              <div class="stat-item">
                <i class="fas fa-file-code"></i>
                <span id="total-files-count">0</span> file pairs
              </div>
              <div class="stat-item">
                <i class="fas fa-not-equal"></i>
                <span id="different-files-count">0</span> with differences
              </div>
              <div class="stat-item identical-files">
                <i class="fas fa-equals"></i>
                <span id="identical-files-count">0</span> identical
              </div>
            </div>
            <div class="summary-totals">
              <div class="stat-item additions">
                <i class="fas fa-plus-circle"></i>
                <span id="total-additions-count">0</span> additions
              </div>
              <div class="stat-item deletions">
                <i class="fas fa-minus-circle"></i>
                <span id="total-deletions-count">0</span> deletions
              </div>
              <div class="stat-item changes">
                <i class="fas fa-exchange-alt"></i>
                <span id="total-changes-count">0</span> changes
              </div>
            </div>
          </div>
        </div>
        
        <div class="multi-diff-navigation">
          <div class="navigation-header">
            <h4>Navigation</h4>
            <div class="navigation-controls">
              <button id="show-all-diffs-btn" class="nav-btn active">All</button>
              <button id="show-changed-diffs-btn" class="nav-btn">Changed</button>
              <button id="show-identical-diffs-btn" class="nav-btn identical-btn">Identical</button>
            </div>
          </div>
          <div id="diff-navigation-list" class="navigation-list">
            <!-- Navigation items will be added here dynamically -->
          </div>
        </div>
        
        <div id="multi-diff-content-container" class="multi-diff-content-container">
          <div class="loading-indicator hidden">
            <div class="spinner"></div>
            <p>Generating diffs...</p>
          </div>
          <div class="empty-state">
            <i class="fas fa-code-compare"></i>
            <p>Add file pairs above and click "Compare All Files" to see the differences</p>
          </div>
          <div id="multi-diff-results" class="multi-diff-results hidden">
            <!-- Diff results will be added here dynamically -->
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p id="app-footer">Diffie &copy; 2025 | A beautiful file diff viewer | Ankit Das</p>
    </footer>
  </div>

  <div id="error-toast" class="toast error-toast hidden">
    <div class="toast-content">
      <i class="fas fa-exclamation-circle"></i>
      <span id="error-message"></span>
    </div>
    <button class="toast-close">&times;</button>
  </div>
  
  <div id="success-toast" class="toast success-toast hidden">
    <div class="toast-content">
      <i class="fas fa-check-circle"></i>
      <span id="success-message"></span>
    </div>
    <button class="toast-close">&times;</button>
  </div>

  <div id="success-toast" class="toast success-toast hidden">
    <div class="toast-content">
      <i class="fas fa-check-circle"></i>
      <span id="success-message"></span>
    </div>
    <button class="toast-close">&times;</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jsdiff/5.1.0/diff.min.js"></script>
  <script src="script.js"></script>
  <script src="multi-diff.js"></script>
</body>
</html>